<script>
  // Cambia esta URL a la que Render te da exactamente
  const SERVER_URL = "https://aula-chat.onrender.com"; 
  const socket = io("https://chat-aula-2b82.onrender.com", { transports: ["websocket", "polling"] });


  const nombreInput = document.getElementById("nombre");

  const storedName = localStorage.getItem("chatNombre");
  if (storedName) nombreInput.value = storedName;

  socket.on("connect", () => {
      console.log("Conectado al servidor Socket.IO");
  });

  socket.on("message", function(data) {
    const p = document.createElement("p");
    p.innerHTML = `<span style="color:${data.color}">${data.nombre}</span> [${data.hora}]: ${data.texto}`;
    document.getElementById("mensajes").appendChild(p);
    document.getElementById("mensajes").scrollTop = document.getElementById("mensajes").scrollHeight;
  });

  function enviar() {
    const nombre = nombreInput.value.trim();
    const mensaje = document.getElementById("mensaje").value.trim();
    if (!nombre) return alert("Introduce tu nombre");
    if (!mensaje) return;
    localStorage.setItem("chatNombre", nombre);
    socket.send(nombre + ": " + mensaje);
    document.getElementById("mensaje").value = "";
  }
</script>


